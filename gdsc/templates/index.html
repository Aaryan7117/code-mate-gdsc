<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Mate</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f7f7f8;
            --text-primary: #343541;
            --text-secondary: #6e6e80;
            --border-color: #e5e5e5;
            --accent-color: #10a37f;
            --accent-hover: #0d8c6d;
            --danger-color: #e53e3e;
            --danger-hover: #c53030;
            --sidebar-width: 260px;
            --message-user-bg: #f7f7f8;
            --message-ai-bg: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.05);
            --code-bg: #2d2d2d;
            --code-color: #f8f8f2;
            --code-header-bg: #1e1e1e;
            --gradient-start: #10a37f;
            --gradient-end: #0d8c6d;
        }

        .dark {
            --bg-primary: #343541;
            --bg-secondary: #444654;
            --text-primary: #ececf1;
            --text-secondary: #c5c5d2;
            --border-color: #4d4d4f;
            --accent-color: #19c37d;
            --accent-hover: #1bd88a;
            --danger-color: #f56565;
            --danger-hover: #e53e3e;
            --message-user-bg: #444654;
            --message-ai-bg: #343541;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --code-bg: #1a1a1a;
            --code-color: #f0f0f0;
            --code-header-bg: #0f0f0f;
            --gradient-start: #19c37d;
            --gradient-end: #1bd88a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            transition: background-color 0.3s, color 0.3s;
        }

        .app-container {
            display: flex;
            height: 100vh;
            width: 100%;
            overflow: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .new-chat-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            padding: 10px 14px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .new-chat-btn:hover {
            background-color: var(--accent-hover);
        }

        .toggle-theme-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
        }

        .toggle-theme-btn:hover {
            background-color: var(--border-color);
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .history-item {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            position: relative;
        }

        .history-item:hover {
            background-color: var(--border-color);
        }

        .history-item svg {
            margin-right: 8px;
        }

        .history-item-title {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .delete-chat-btn {
            opacity: 0;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: opacity 0.2s, color 0.2s;
        }

        .history-item:hover .delete-chat-btn {
            opacity: 1;
        }

        .delete-chat-btn:hover {
            color: var(--danger-color);
        }

        /* User profile in sidebar */
        .user-profile {
            padding: 16px;
            border-top: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            overflow: hidden;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-info {
            flex: 1;
            overflow: hidden;
        }

        .user-name {
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .user-streak {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--text-secondary);
            font-size: 12px;
        }

        .streak-flame {
            color: #ff6b00;
        }

        .user-actions {
            display: flex;
            gap: 8px;
        }

        .user-action-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
        }

        .user-action-btn:hover {
            color: var(--accent-color);
        }

        /* Main Chat Area Styles */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
        }

        .toggle-sidebar-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            margin-right: 16px;
            padding: 4px;
            border-radius: 4px;
            display: none;
        }

        .toggle-sidebar-btn:hover {
            background-color: var(--border-color);
        }

        .chat-header h1 {
            font-size: 18px;
            font-weight: 600;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            display: flex;
            flex-direction: column;
        }

        .welcome-message {
            text-align: center;
            margin: auto;
            max-width: 600px;
        }

        .welcome-message h2 {
            margin-bottom: 24px;
            font-size: 32px;
            font-weight: 600;
        }

        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin-top: 24px;
        }

        .suggestion-chip {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 10px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
            color: var(--text-primary);
        }

        .suggestion-chip:hover {
            background-color: var(--border-color);
        }

        .message {
            max-width: 80%;
            margin-bottom: 24px;
            animation: fadeIn 0.3s;
            display: flex;
            flex-direction: column;
        }

        .message-user {
            align-self: flex-end;
            background-color: var(--message-user-bg);
            border-radius: 12px 12px 0 12px;
            padding: 12px 16px;
        }

        .message-ai {
            align-self: flex-start;
            background-color: var(--message-ai-bg);
            border-radius: 12px 12px 12px 0;
            padding: 12px 16px;
            box-shadow: 0 2px 6px var(--shadow-color);
        }

        /* Enhanced message content styling */
        .message-content ul, .message-content ol {
            padding-left: 20px;
            margin: 10px 0;
        }

        .message-content ul li, .message-content ol li {
            margin-bottom: 8px;
            position: relative;
        }

        .message-content ul li::before {
            content: "•";
            color: var(--accent-color);
            font-weight: bold;
            position: absolute;
            left: -15px;
        }

        .message-content p {
            margin-bottom: 10px;
        }

        .message-content p:last-child {
            margin-bottom: 0;
        }

        /* Code block styling */
        .code-container {
            margin: 10px 0;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 6px var(--shadow-color);
        }

        .code-header {
            background-color: var(--code-header-bg);
            color: var(--text-secondary);
            padding: 8px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
        }

        .language-tag {
            font-family: monospace;
        }

        .copy-btn, .run-code-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            transition: background-color 0.2s;
            position: relative;
        }

        .code-header-actions {
            display: flex;
            gap: 8px;
        }

        .copy-btn:hover, .run-code-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .copy-btn.copied {
            color: var(--accent-color);
        }

        .code-block {
            background-color: var(--code-bg);
            color: var(--code-color);
            padding: 12px;
            margin: 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre;
        }

        .code-output {
            background-color: #000;
            color: #0f0;
            padding: 12px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            border-top: 1px solid #333;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background-color: var(--message-ai-bg);
            border-radius: 12px 12px 12px 0;
            align-self: flex-start;
            box-shadow: 0 2px 6px var(--shadow-color);
            margin-bottom: 24px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            margin: 0 2px;
            background-color: var(--text-secondary);
            border-radius: 50%;
            display: inline-block;
            animation: typing 1.4s infinite both;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); }
            100% { transform: scale(1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .input-container {
            padding: 16px;
            border-top: 1px solid var(--border-color);
        }

        .input-box {
            display: flex;
            align-items: flex-end;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 8px 16px;
            margin-bottom: 8px;
        }

        .input-box textarea {
            flex: 1;
            border: none;
            background: transparent;
            resize: none;
            max-height: 200px;
            min-height: 24px;
            padding: 8px 0;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 16px;
            outline: none;
        }

        .input-box textarea::placeholder {
            color: var(--text-secondary);
        }

        .input-buttons {
            display: flex;
            align-items: center;
        }

        .upload-btn, .send-btn, .voice-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            margin-left: 8px;
        }

        .upload-btn:hover, .send-btn:hover, .voice-btn:hover {
            color: var(--accent-color);
            background-color: var(--border-color);
        }

        .voice-btn.recording {
            color: var(--danger-color);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .disclaimer {
            text-align: center;
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background-color: var(--bg-primary);
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .modal-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 18px;
            font-weight: 600;
        }

        .close-modal-btn, .close-delete-modal-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
        }

        .modal-body {
            padding: 16px;
        }

        .file-drop-area {
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            padding: 32px 16px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 16px;
            transition: border-color 0.2s;
        }

        .file-drop-area:hover {
            border-color: var(--accent-color);
        }

        .file-input {
            display: none;
        }

        .file-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .file-name {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .remove-file-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
        }

        .modal-footer {
            padding: 16px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .cancel-upload-btn, .confirm-upload-btn, .cancel-delete-btn, .confirm-delete-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
        }

        .cancel-upload-btn, .cancel-delete-btn {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .confirm-upload-btn {
            background-color: var(--accent-color);
            border: none;
            color: white;
        }

        .confirm-upload-btn:hover {
            background-color: var(--accent-hover);
        }

        .confirm-delete-btn {
            background-color: var(--danger-color);
            border: none;
            color: white;
        }

        .confirm-delete-btn:hover {
            background-color: var(--danger-hover);
        }

        /* Error message */
        .error-message {
            background-color: var(--danger-color);
            color: white;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 16px;
            text-align: center;
            animation: fadeIn 0.3s;
        }

        /* Feedback buttons */
        .feedback-container {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-top: 8px;
        }

        .feedback-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 16px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .feedback-btn:hover {
            background-color: var(--bg-secondary);
            transform: scale(1.05);
        }

        .feedback-btn.active {
            color: var(--accent-color);
            border-color: var(--accent-color);
        }

        .feedback-btn.negative.active {
            color: var(--danger-color);
            border-color: var(--danger-color);
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                z-index: 100;
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .toggle-sidebar-btn {
                display: block;
            }
            
            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar with chat history -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <button class="new-chat-btn">
                    <span>New chat</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>
                </button>
                <button class="toggle-theme-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
                </button>
            </div>
            <div class="chat-history">
                <!-- Chat history will be populated here -->
            </div>
            <div class="user-profile">
                <div class="user-avatar">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                </div>
                <div class="user-info">
                    <div class="user-name">Guest User</div>
                    <div class="user-streak">
                        <span class="streak-flame">🔥</span>
                        <span>1 day streak</span>
                    </div>
                </div>
                <div class="user-actions">
                    <button class="user-action-btn" id="settings-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main chat area -->
        <main class="chat-container">
            <div class="chat-header">
                <button class="toggle-sidebar-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg>
                </button>
                <h1>Code Mate</h1>
            </div>
            
            <div class="messages-container" id="messages-container">
                <!-- Messages will be displayed here -->
                <div class="welcome-message">
                    <h2>How can I help you today?</h2>
                    <div class="suggestion-chips">
                        <button class="suggestion-chip">Tell me a joke</button>
                        <button class="suggestion-chip">Write a poem</button>
                        <button class="suggestion-chip">Explain quantum physics</button>
                        <button class="suggestion-chip">Help with coding</button>
                    </div>
                </div>
            </div>
            
            <div class="input-container">
                <div class="input-box">
                    <textarea id="user-input" placeholder="Message Code Mate..."></textarea>
                    <div class="input-buttons">
                        <button class="voice-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line></svg>
                        </button>
                        <button class="upload-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                        </button>
                        <button class="send-btn" disabled>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m22 2-7 20-4-9-9-4Z"></path><path d="M22 2 11 13"></path></svg>
                        </button>
                    </div>
                </div>
                <div class="disclaimer">
                    Code Mate can make mistakes. Consider checking important information.
                </div>
            </div>
        </main>
    </div>

    <!-- File upload modal -->
    <div class="modal" id="file-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upload File</h2>
                <button class="close-modal-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="file-drop-area">
                    <span class="file-msg">Drag & drop files here or click to browse</span>
                    <input class="file-input" type="file" multiple>
                </div>
                <div class="file-list">
                    <!-- Uploaded files will appear here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="cancel-upload-btn">Cancel</button>
                <button class="confirm-upload-btn">Upload</button>
            </div>
        </div>
    </div>

    <!-- Delete confirmation modal -->
    <div class="modal" id="delete-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Delete Chat</h2>
                <button class="close-delete-modal-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this chat? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="cancel-delete-btn">Cancel</button>
                <button class="confirm-delete-btn">Delete</button>
            </div>
        </div>
    </div>

    <!-- Settings modal -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="close-settings-modal-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>Appearance</h3>
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label">Dark Mode</div>
                            <div class="settings-option-description">Switch between light and dark themes</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dark-mode-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Chat Settings</h3>
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label">Code Execution</div>
                            <div class="settings-option-description">Allow running code snippets in the chat</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="code-execution-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label">Voice Input</div>
                            <div class="settings-option-description">Enable voice-to-text for messages</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="voice-input-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const messagesContainer = document.getElementById('messages-container');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.querySelector('.send-btn');
        const themeToggle = document.querySelector('.toggle-theme-btn');
        const toggleSidebarBtn = document.querySelector('.toggle-sidebar-btn');
        const sidebar = document.querySelector('.sidebar');
        const newChatBtn = document.querySelector('.new-chat-btn');
        const uploadBtn = document.querySelector('.upload-btn');
        const voiceBtn = document.querySelector('.voice-btn');
        const settingsBtn = document.getElementById('settings-btn');
        
        // File upload modal elements
        const fileModal = document.getElementById('file-modal');
        const closeModalBtn = document.querySelector('.close-modal-btn');
        const cancelUploadBtn = document.querySelector('.cancel-upload-btn');
        const confirmUploadBtn = document.querySelector('.confirm-upload-btn');
        const fileDropArea = document.querySelector('.file-drop-area');
        const fileInput = document.querySelector('.file-input');
        const fileList = document.querySelector('.file-list');
        
        // Delete modal elements
        const deleteModal = document.getElementById('delete-modal');
        const closeDeleteModalBtn = document.querySelector('.close-delete-modal-btn');
        const cancelDeleteBtn = document.querySelector('.cancel-delete-btn');
        const confirmDeleteBtn = document.querySelector('.confirm-delete-btn');
        
        // Settings modal elements
        const settingsModal = document.getElementById('settings-modal');
        const closeSettingsModalBtn = document.querySelector('.close-settings-modal-btn');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const codeExecutionToggle = document.getElementById('code-execution-toggle');
        const voiceInputToggle = document.getElementById('voice-input-toggle');
        
        // App State
        let isTyping = false;
        let uploadedFiles = [];
        let chatToDelete = null;
        let currentQuery = '';
        let currentResponse = '';
        let recognition = null;

        // Initialize App
        document.addEventListener('DOMContentLoaded', initializeApp);

        function initializeApp() {
            // Add event listeners
            setupEventListeners();
            
            // Check if dark mode is enabled in local storage
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark');
                darkModeToggle.checked = true;
                updateThemeIcon();
            }
            
            // Setup suggestion chips
            setupSuggestionChips();
        }

        function setupEventListeners() {
            // Chat input
            userInput.addEventListener('input', () => {
                sendBtn.disabled = !userInput.value.trim();
                autoResizeTextarea();
            });
            
            userInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (userInput.value.trim()) {
                        sendMessage();
                    }
                }
            });
            
            sendBtn.addEventListener('click', sendMessage);
            
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Sidebar toggle (mobile)
            toggleSidebarBtn.addEventListener('click', () => {
                sidebar.classList.toggle('show');
            });
            
            // New chat
            newChatBtn.addEventListener('click', startNewChat);
            
            // File upload
            uploadBtn.addEventListener('click', openFileModal);
            closeModalBtn.addEventListener('click', closeFileModal);
            cancelUploadBtn.addEventListener('click', closeFileModal);
            confirmUploadBtn.addEventListener('click', handleFileUpload);
            
            fileDropArea.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelection);
            
            // Setup drag and drop for file upload
            setupDragAndDrop();
            
            // Delete chat
            closeDeleteModalBtn.addEventListener('click', closeDeleteModal);
            cancelDeleteBtn.addEventListener('click', closeDeleteModal);
            confirmDeleteBtn.addEventListener('click', confirmDeleteChat);
            
            // Settings
            settingsBtn.addEventListener('click', openSettingsModal);
            closeSettingsModalBtn.addEventListener('click', closeSettingsModal);
            
            // Dark mode toggle in settings
            darkModeToggle.addEventListener('change', toggleTheme);
            
            // Voice input
            voiceBtn.addEventListener('click', toggleVoiceInput);
        }

        function setupSuggestionChips() {
            const suggestionChips = document.querySelectorAll('.suggestion-chip');
            suggestionChips.forEach(chip => {
                chip.addEventListener('click', () => {
                    userInput.value = chip.textContent;
                    sendBtn.disabled = false;
                    sendMessage();
                });
            });
        }

        async function sendMessage() {
            if (isTyping) return;

            const message = userInput.value.trim();
            if (!message) return;

            // Clear welcome message if present
            const welcomeMessage = document.querySelector('.welcome-message');
            if (welcomeMessage) {
                welcomeMessage.remove();
            }

            // Clear any previous error messages
            const errorMessage = document.querySelector('.error-message');
            if (errorMessage) {
                errorMessage.remove();
            }

            // Add user message to UI
            addMessageToUI('user', message);
            currentQuery = message;

            // Clear input
            userInput.value = '';
            userInput.style.height = 'auto';
            sendBtn.disabled = true;

            // Show typing indicator
            showTypingIndicator();

            try {
                // Get AI response
                const aiResponse = await getAIResponse(message);
                currentResponse = aiResponse;

                // Hide typing indicator
                hideTypingIndicator();

                // Add AI response to UI with feedback buttons
                addMessageToUI('assistant', aiResponse, true);
            } catch (error) {
                console.error('Error:', error);

                // Hide typing indicator
                hideTypingIndicator();

                // Show error message
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.textContent = 'Failed to get response from the AI. Please try again.';
                messagesContainer.appendChild(errorDiv);
            }
        }

        async function getAIResponse(message) {
            try {
                const response = await fetch('/ask', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ query: message })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                return data.response || "Sorry, I couldn't process your request.";
            } catch (error) {
                console.error('Error fetching AI response:', error);
                throw error;
            }
        }

        function addMessageToUI(role, content, addFeedback = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message message-${role === 'user' ? 'user' : 'ai'}`;
            
            // Create a content container for formatting
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            // Format the content with bullet points and code blocks
            contentDiv.innerHTML = formatMessageContent(content);
            
            messageDiv.appendChild(contentDiv);
            
            // Add feedback buttons for AI responses
            if (role === 'assistant' && addFeedback) {
                const feedbackContainer = document.createElement('div');
                feedbackContainer.className = 'feedback-container';
                feedbackContainer.innerHTML = `
                    <button class="feedback-btn positive" onclick="sendFeedback(1)">👍</button>
                    <button class="feedback-btn negative" onclick="sendFeedback(-1)">👎</button>
                `;
                messageDiv.appendChild(feedbackContainer);
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Add event listeners to code blocks
            setupCodeBlockInteractions(messageDiv);
        }

        function setupCodeBlockInteractions(messageDiv) {
            // Add event listeners to copy buttons
            const copyButtons = messageDiv.querySelectorAll('.copy-btn');
            copyButtons.forEach(btn => {
                btn.addEventListener('click', handleCopyCode);
            });
            
            // Add event listeners to run code buttons
            const runButtons = messageDiv.querySelectorAll('.run-code-btn');
            runButtons.forEach(btn => {
                btn.addEventListener('click', handleRunCode);
            });
        }

        function handleCopyCode(e) {
            const codeId = e.target.getAttribute('data-code-id');
            const codeElement = document.getElementById(codeId);
            
            if (codeElement) {
                const codeText = codeElement.textContent;
                
                // Copy to clipboard
                navigator.clipboard.writeText(codeText)
                    .then(() => {
                        // Show copied state
                        e.target.classList.add('copied');
                        e.target.textContent = 'Copied!';
                        
                        // Reset after 2 seconds
                        setTimeout(() => {
                            e.target.classList.remove('copied');
                            e.target.textContent = 'Copy';
                        }, 2000);
                    })
                    .catch(err => {
                        console.error('Failed to copy text: ', err);
                    });
            }
        }

        function handleRunCode(e) {
            const codeId = e.target.getAttribute('data-code-id');
            const codeElement = document.getElementById(codeId);
            const codeContainer = codeElement.closest('.code-container');
            
            // Get or create output element
            let outputElement = codeContainer.querySelector('.code-output');
            if (!outputElement) {
                outputElement = document.createElement('div');
                outputElement.className = 'code-output';
                codeContainer.appendChild(outputElement);
            }
            
            // Show output element
            outputElement.style.display = 'block';
            outputElement.textContent = 'Running code...';
            
            // Get code text
            const codeText = codeElement.textContent;
            
            // Execute code safely
            try {
                // Create a safe execution environment
                const originalConsoleLog = console.log;
                const originalConsoleError = console.error;
                const originalConsoleWarn = console.warn;
                const originalConsoleInfo = console.info;
                
                let output = '';
                
                // Override console methods
                console.log = (...args) => {
                    output += args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg).join(' ') + '\n';
                    originalConsoleLog(...args);
                };
                
                console.error = (...args) => {
                    output += 'ERROR: ' + args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg).join(' ') + '\n';
                    originalConsoleError(...args);
                };
                
                console.warn = (...args) => {
                    output += 'WARNING: ' + args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg).join(' ') + '\n';
                    originalConsoleWarn(...args);
                };
                
                console.info = (...args) => {
                    output += 'INFO: ' + args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg).join(' ') + '\n';
                    originalConsoleInfo(...args);
                };
                
                // Execute the code
                const result = new Function(codeText)();
                
                // Restore console methods
                console.log = originalConsoleLog;
                console.error = originalConsoleError;
                console.warn = originalConsoleWarn;
                console.info = originalConsoleInfo;
                
                // Display output
                if (output) {
                    outputElement.textContent = output;
                } else if (result !== undefined) {
                    outputElement.textContent = result;
                } else {
                    outputElement.textContent = 'Code executed successfully with no output.';
                }
            } catch (error) {
                outputElement.textContent = 'Error: ' + error.message;
            }
        }

        // Format message content with bullet points and code blocks
        function formatMessageContent(content) {
            // Check if content contains code
            if (containsCode(content)) {
                return formatCodeBlock(content);
            }
            
            // Format bullet points
            let formattedContent = content;
            
            // Convert lines starting with - or * to bullet points
            if (content.includes('\n- ') || content.includes('\n* ') || content.startsWith('- ') || content.startsWith('* ')) {
                const lines = content.split('\n');
                let inList = false;
                let html = '';
                
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i];
                    
                    if (line.trim().startsWith('- ') || line.trim().startsWith('* ')) {
                        if (!inList) {
                            html += '<ul>';
                            inList = true;
                        }
                        html += `<li>${line.trim().substring(2)}</li>`;
                    } else {
                        if (inList) {
                            html += '</ul>';
                            inList = false;
                        }
                        html += `<p>${line}</p>`;
                    }
                }
                
                if (inList) {
                    html += '</ul>';
                }
                
                return html;
            }
            
            // Format numbered lists
            if (content.includes('\n1. ') || content.startsWith('1. ')) {
                const lines = content.split('\n');
                let inList = false;
                let html = '';
                
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i];
                    const numberMatch = line.trim().match(/^(\d+)\.\s(.*)/)
                    
                    if (numberMatch) {
                        if (!inList) {
                            html += '<ol>';
                            inList = true;
                        }
                        html += `<li>${numberMatch[2]}</li>`;
                    } else {
                        if (inList) {
                            html += '</ol>';
                            inList = false;
                        }
                        html += `<p>${line}</p>`;
                    }
                }
                
                if (inList) {
                    html += '</ol>';
                }
                
                return html;
            }
            
            // If no special formatting, wrap in paragraph
            return `<p>${content}</p>`;
        }
        
        // Check if content contains code
        function containsCode(content) {
            return content.includes('```') || 
                   content.includes('function ') || 
                   content.includes('const ') || 
                   content.includes('let ') || 
                   content.includes('var ') ||
                   content.includes('class ') ||
                   content.includes('import ') ||
                   content.includes('for (') ||
                   content.includes('if (');
        }
        
        // Format code blocks
        function formatCodeBlock(content) {
            // Check for code blocks with backticks
            if (content.includes('```')) {
                let html = '';
                const parts = content.split('```');
                
                for (let i = 0; i < parts.length; i++) {
                    if (i % 2 === 0) {
                        // Text content
                        if (parts[i].trim()) {
                            html += `<p>${parts[i]}</p>`;
                        }
                    } else {
                        // Code content
                        let code = parts[i];
                        let language = 'javascript';
                        
                        // Check if language is specified
                        const firstLineBreak = code.indexOf('\n');
                        if (firstLineBreak > 0) {
                            const possibleLang = code.substring(0, firstLineBreak).trim();
                            if (possibleLang && !possibleLang.includes(' ')) {
                                language = possibleLang;
                                code = code.substring(firstLineBreak + 1);
                            }
                        }
                        
                        html += createCodeBlockHTML(code, language);
                    }
                }
                
                return html;
            }
            
            // Detect inline code
            if (containsCode(content)) {
                return createCodeBlockHTML(content, 'javascript');
            }
            
            return `<p>${content}</p>`;
        }
        
        // Create HTML for code block with copy and run buttons
        function createCodeBlockHTML(code, language) {
            const codeId = 'code-' + generateId();
            const isJavaScript = language === 'javascript' || language === 'js';
            
            return `
                <div class="code-container">
                    <div class="code-header">
                        <span class="language-tag">${language}</span>
                        <div class="code-header-actions">
                            <button class="copy-btn" data-code-id="${codeId}">Copy</button>
                            ${isJavaScript ? `<button class="run-code-btn" data-code-id="${codeId}">Run</button>` : ''}
                        </div>
                    </div>
                    <pre class="code-block" id="${codeId}">${escapeHtml(code.trim())}</pre>
                </div>
            `;
        }
        
        // Escape HTML special characters
        function escapeHtml(text) {
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }

        function showTypingIndicator() {
            isTyping = true;
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.innerHTML = '<span></span><span></span><span></span>';
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            isTyping = false;
            const typingIndicator = document.querySelector('.typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function startNewChat() {
            // Clear messages container
            messagesContainer.innerHTML = `
                <div class="welcome-message">
                    <h2>How can I help you today?</h2>
                    <div class="suggestion-chips">
                        <button class="suggestion-chip">Tell me a joke</button>
                        <button class="suggestion-chip">Write a poem</button>
                        <button class="suggestion-chip">Explain quantum physics</button>
                        <button class="suggestion-chip">Help with coding</button>
                    </div>
                </div>
            `;

            // Setup suggestion chips again
            setupSuggestionChips();

            // Close sidebar on mobile
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('show');
            }
        }

        function toggleTheme() {
            document.body.classList.toggle('dark');
            
            // Update toggle in settings if it exists
            if (darkModeToggle) {
                darkModeToggle.checked = document.body.classList.contains('dark');
            }
            
            // Update theme icon
            updateThemeIcon();
            
            // Save preference to local storage
            localStorage.setItem('darkMode', document.body.classList.contains('dark'));
        }

        function updateThemeIcon() {
            const isDark = document.body.classList.contains('dark');
            themeToggle.innerHTML = isDark
                ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>'
                : '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>';
        }

        // File Upload Functions
        function openFileModal() {
            fileModal.classList.add('show');
            uploadedFiles = [];
            renderFileList();
        }

        function closeFileModal() {
            fileModal.classList.remove('show');
        }

        function handleFileSelection(e) {
            const files = e.target.files;
            processFiles(files);
        }

        function processFiles(files) {
            for (let i = 0; i < files.length; i++) {
                uploadedFiles.push(files[i]);
            }
            renderFileList();
        }

        function renderFileList() {
            fileList.innerHTML = '';
            
            uploadedFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <span class="file-name">${file.name}</span>
                    <button class="remove-file-btn" data-index="${index}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
                    </button>
                `;
                fileList.appendChild(fileItem);
            });

            // Add event listeners to remove buttons
            document.querySelectorAll('.remove-file-btn').forEach((btn) => {
                btn.addEventListener('click', (e) => {
                    const index = Number.parseInt(e.currentTarget.dataset.index);
                    uploadedFiles.splice(index, 1);
                    renderFileList();
                });
            });
        }

        async function handleFileUpload() {
            if (uploadedFiles.length === 0) return;

            // Add file message to chat
            const fileNames = uploadedFiles.map((file) => file.name).join(', ');
            const fileMessage = `Uploaded files: ${fileNames}`;
            
            // Add message to UI
            addMessageToUI('user', fileMessage);
            
            // Close modal
            closeFileModal();

            // Show typing indicator
            showTypingIndicator();

            // Simulate AI response after a delay
            setTimeout(async () => {
                const aiResponse = `I've received your files (${fileNames}). What would you like me to do with them?`;
                
                // Hide typing indicator
                hideTypingIndicator();
                
                // Add AI response to UI
                addMessageToUI('assistant', aiResponse, true);
                
            }, 1500 + Math.random() * 1000);
        }

        function setupDragAndDrop() {
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach((eventName) => {
                fileDropArea.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach((eventName) => {
                fileDropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach((eventName) => {
                fileDropArea.addEventListener(eventName, unhighlight, false);
            });

            function highlight() {
                fileDropArea.classList.add('highlight');
            }

            function unhighlight() {
                fileDropArea.classList.remove('highlight');
            }

            fileDropArea.addEventListener('drop', handleDrop, false);

            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                processFiles(files);
            }
        }

        function autoResizeTextarea() {
            userInput.style.height = 'auto';
            userInput.style.height = userInput.scrollHeight + 'px';
        }

        // Voice Input
        function toggleVoiceInput() {
            if (voiceBtn.classList.contains('recording')) {
                // Stop recording
                voiceBtn.classList.remove('recording');
                stopVoiceRecognition();
            } else {
                // Start recording
                voiceBtn.classList.add('recording');
                startVoiceRecognition();
            }
        }

        function startVoiceRecognition() {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                alert("Your browser doesn't support speech recognition. Try Chrome or Edge.");
                return;
            }
            
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            
            recognition.continuous = true;
            recognition.interimResults = true;
            recognition.lang = 'en-US';
            
            recognition.onresult = (event) => {
                let transcript = '';
                
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    transcript += event.results[i][0].transcript;
                }
                
                userInput.value = transcript;
                sendBtn.disabled = !transcript.trim();
                autoResizeTextarea();
            };
            
            recognition.onerror = (event) => {
                console.error('Speech recognition error', event.error);
                stopVoiceRecognition();
            };
            
            recognition.onend = () => {
                voiceBtn.classList.remove('recording');
            };
            
            recognition.start();
        }

        function stopVoiceRecognition() {
            if (recognition) {
                recognition.stop();
                recognition = null;
            }
        }  
        {
                recognition.stop();
                recognition = null;
        }

        // Settings Modal
        function openSettingsModal() {
            settingsModal.classList.add('show');
            
            // Set dark mode toggle state
            darkModeToggle.checked = document.body.classList.contains('dark');
        }

        function closeSettingsModal() {
            settingsModal.classList.remove('show');
        }

        // Delete Chat
        function openDeleteModal(chatId) {
            chatToDelete = chatId;
            deleteModal.classList.add('show');
        }

        function closeDeleteModal() {
            deleteModal.classList.remove('show');
            chatToDelete = null;
        }

        function confirmDeleteChat() {
            if (!chatToDelete) return;
            
            // Close modal
            closeDeleteModal();
            
            // Start a new chat
            startNewChat();
        }

        // Feedback Function
        async function sendFeedback(rating) {
            try {
                await fetch('/submit_feedback', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        query: currentQuery,
                        response: currentResponse,
                        rating: rating
                    })
                });

                // Visual feedback
                const feedbackBtns = document.querySelectorAll('.feedback-btn');
                feedbackBtns.forEach(btn => {
                    if ((rating === 1 && btn.classList.contains('positive')) || 
                        (rating === -1 && btn.classList.contains('negative'))) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });

                console.log('Feedback submitted successfully!');
            } catch (error) {
                console.error('Error sending feedback:', error);
            }
        }

        // Helper Functions
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substring(2);
        }

        // Make sendFeedback available globally
        window.sendFeedback = sendFeedback;
    </script>
</body>
</html>
